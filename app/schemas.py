from typing import List

from fastapi import Query
from pydantic import BaseModel, validator


class Transaction(BaseModel):
    #text: str = Query(None, min_length=1)
    Time: int
    V1: float
    V2: float
    V3: float
    V4: float
    V5: float
    V6: float
    V7: float
    V8: float
    V9: float
    V10: float
    V11: float
    V12: float
    V13: float
    V14: float
    V15: float
    V16: float
    V17: float
    V18: float
    V19: float
    V20: float
    V21: float
    V22: float
    V23: float
    V24: float
    V25: float
    V26: float
    V27: float
    V28: float
    Amount: float


class PredictPayload(BaseModel):
    transactions: List[Transaction]

    @validator("transactions")
    def list_must_not_be_empty(cls, value):
        if not len(value):
            raise ValueError("List of texts to classify cannot be empty.")
        return value

    class Config:
        schema_extra = {
            "example": {
                "transactions": [
                    {"Time":160760.0,"V1":-0.6744660645783139,"V2":1.40810501967799,"V3":-1.11062205357093,"V4":-1.32836577843066,"V5":1.3889960325483701,"V6":-1.30843906707795,"V7":1.8858789026871698,"V8":-0.614232966299775,"V9":0.31165221245310104,"V10":0.65075700363522,"V11":-0.8577846615478051,"V12":-0.229961445775592,"V13":-0.19981700479102998,"V14":0.26637132632987903,"V15":-0.0465441684754424,"V16":-0.741398089749789,"V17":-0.605616644106022,"V18":-0.39256818789208003,"V19":-0.162648311024695,"V20":0.394321820843914,"V21":0.0800842396026648,"V22":0.810033595602455,"V23":-0.22432723043641198,"V24":0.7078992374468671,"V25":-0.13583702273753,"V26":0.0451021964988772,"V27":0.533837219064273,"V28":0.291319252625364,"Amount":23.0},
                    {"Time":19847.0,"V1":-2.8298159432727905,"V2":-2.7651492122926897,"V3":2.5377929506399703,"V4":-1.0745804225919 ,"V5":2.84255889292598,"V6":-2.15353644367205 ,"V7":-1.7955188572036898,"V8":-0.250020372324704,"V9":3.07350426338358,"V10":0.65075700363522,"V11":1.85084176033081,"V12":-1.54977887088034 ,"V13":1.25233673695303 ,"V14":0.963974373307274,"V15":-0.48102722379162605,"V16":-0.741398089749789,"V17":-0.605616644106022,"V18":-0.39256818789208003,"V19":-0.162648311024695,"V20":0.394321820843914,"V21":0.0800842396026648,"V22":0.810033595602455,"V23":-0.22432723043641198,"V24":0.7078992374468671,"V25":-0.13583702273753,"V26":0.0451021964988772,"V27":0.533837219064273,"V28":0.291319252625364,"Amount":11.85}

                ]
            }
        }
